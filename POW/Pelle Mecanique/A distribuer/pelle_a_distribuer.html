<!DOCTYPE html>
<html>
  <head>
    <title>Caterpillar</title>	
	<style>
		body{
			overflow: hidden;
			width: 1200px;
			margin: auto;
		}
	
		img, div {						
			position:absolute;	
		}		

		#interface{			
			text-align: center;
			top: 550px;
			width: 900px;			
		}
		
	</style>
  </head>
  <body onkeydown="presser(event.keyCode)" onkeyup="relacher(event.keyCode)" id="body">
	<div style="background-image:url('fond.jpg'); width:1000px; height:526px; overflow: hidden;" id="fond">       		
		<div style="background-image:url('pelle1.png'); width:383px; height:289px; left:200px; top:120px; transform:scale(0.7,0.7); " id="pelle">       		
			<div style="background-image:url('pelle2.png'); width:333px; height:311px; left:300px; top:-100px; transform-origin: 5% 88%; transform: rotate(0deg);" id="bras">       		
				<div style="background-image:url('pelle3.png'); width:80px; height:249px; left:260px; top:40px; transform-origin: 54% 6%; transform: rotate(0deg);" id="avantbras">
					<img src="pelle4.png" id="bene" style="left:25px; top:230px; transform-origin: 8% 8%; transform: rotate(0deg);"/>
				</div>
			</div>
			<img src="pelle5.png" id="roueg" style="left:70px; top:200px; transform: rotate(0deg);"/>
			<img src="pelle5.png" id="roued" style="left:220px; top:200px; transform: rotate(0deg);"/>
		</div>
		<div id="fumee">
		</div>
	</div>
	<script>
		function presser(event) {
			switch (event) {
				case 37://ARROW LEFT
					position = parseInt(document.getElementById("pelle").style.left);
					rotation = val(document.getElementById("roueg").style.transform);
					if (position > -60) {
						  
						document.getElementById("roueg").style.transform = "rotate("+ (rotation-5) +"deg)";
						document.getElementById("roued").style.transform = "rotate("+ (rotation-5) +"deg)";

					}
					break;
				case 39://ARROW RIGHT
					position = parseInt(document.getElementById("pelle").style.left);
					rotation = val(document.getElementById("roueg").style.transform);
					if (position < 675) {
						document.getElementById("pelle").style.left = (position+5) +"px";
						document.getElementById("roueg").style.transform = "rotate("+ (rotation+5) +"deg)";
						document.getElementById("roued").style.transform = "rotate("+ (rotation+5) +"deg)";

					}
					break;
				case 38://ARROW UP
					rotation = val(document.getElementById("bras").style.transform);
					if (rotation > -30) {
						document.getElementById("bras").style.transform = "rotate("+ (rotation-5) +"deg)";
					}
					break;
				case 40://DOWN ARROW
					rotation = val(document.getElementById("bras").style.transform);
					if (rotation < 40) {
						document.getElementById("bras").style.transform = "rotate("+ (rotation+5) +"deg)";
					}
					break;
				case 87://W
					rotation = val(document.getElementById("avantbras").style.transform);
					if (rotation > -90) {
						document.getElementById("avantbras").style.transform = "rotate("+ (rotation-5) +"deg)";
					}
					break;
				case 83://S
				rotation = val(document.getElementById("avantbras").style.transform);
					if (rotation < 40) {
						document.getElementById("avantbras").style.transform = "rotate("+ (rotation+5) +"deg)";
					}
					break;
				case 65://A
					rotation = val(document.getElementById("bene").style.transform);
					if (rotation > -50) {
						document.getElementById("bene").style.transform = "rotate("+ (rotation-5) +"deg)";
					}
					break;
				case 68://D
					rotation = val(document.getElementById("bene").style.transform);
					if (rotation < 90) {
						document.getElementById("bene").style.transform = "rotate("+ (rotation+5) +"deg)";
					}
					break;
			
				default:
					break;
			}
		}
		function relacher(event) {
			
		}
		function val(params) {
			//var str = "rotate(25deg)";
			var str = params;
    		var str1 = str.split("(");
    		var res = str1[1].split("d");
			return parseInt(res[0]);
		}
  </script> 
	<div id="interface">
		<input onmousedown="presser(37)" onmouseup="relacher(37)" type="button" id="gauche" value="Gauche (&larr;)"/>
		<input onmousedown="presser(39)" onmouseup="relacher(39)" type="button" id="droite" value="Droite (&rarr;)"/>
		<input onmousedown="presser(38)" onmouseup="relacher(38)" type="button" id="brashaut" value="Bras Haut (&uarr;)"/>
		<input onmousedown="presser(40)" onmouseup="relacher(40)" type="button" id="brasbas" value="Bras Bas (&darr;)"/>
		<input onmousedown="presser(87)" onmouseup="relacher(87)" type="button" id="avantbrashaut" value="Avant Bras Haut (W)"/>
		<input onmousedown="presser(83)" onmouseup="relacher(83)" type="button" id="avantbrasbas" value="Avant Bras Bas (S)"/>
		<input onmousedown="presser(65)" onmouseup="relacher(65)" type="button" id="pellehaut" value="Pelle Haut (A)"/>
		<input onmousedown="presser(68)" onmouseup="relacher(68)" type="button" id="pellebas" value="Pelle Bas (D)"/>
	</div>
  </body>
</html>